# Система анализа состояния дорожного покрытия

## Описание проекта
Проект представляет собой веб-приложение для анализа состояния дорожного покрытия с использованием компьютерного зрения и искусственного интеллекта. Система способна обнаруживать различные типы дефектов дорожного покрытия и предоставлять рекомендации по их устранению.

## Требования к системе

### Минимальные требования:
- Windows 10/11
- Python 3.8 или выше
- 8 ГБ оперативной памяти
- 10 ГБ свободного места на диске
- NVIDIA GPU с 4 ГБ видеопамяти (для обучения модели)

### Используемое ПО:
1. Python 3.12.2
2. PostgreSQL 17v 
3. Git
4. CUDA Toolkit 11.8 (для работы с GPU)
5. Visual Studio Code (рекомендуется)

## Установка и настройка

### 1. Клонирование репозитория
```bash
git clone <url-репозитория>
cd <название-папки-проекта>
```

### 2. Создание и активация виртуального окружения
```bash
python -m venv venv
# Для Windows:
venv\Scripts\activate
# Для Linux/Mac:
source venv/bin/activate
```

### 3. Установка зависимостей
```bash
pip install -r requirements.txt
```

### 4. Настройка базы данных
1. Установите PostgreSQL
2. Создайте базу данных:
```sql
CREATE DATABASE roads;
```
3. Настройте файл `config.py`:
```python
SQLALCHEMY_DATABASE_URI = 'postgresql+pg8000://postgres:ваш_пароль@localhost/roads'
SECRET_KEY = 'ваш_секретный_ключ'
```

## Запуск приложения

### 1. Инициализация базы данных
```bash
python
>>> from app import app, db
>>> with app.app_context():
...     db.create_all()
```

### 2. Запуск веб-приложения
```bash
python app.py
```
Приложение будет доступно по адресу: http://localhost:5000

## Обучение модели

### 1. Подготовка данных
1. Создайте структуру папок для датасета:
```
dataset/
├── images/
│   ├── train/
│   └── val/
└── labels/
    ├── train/
    └── val/
```

2. Разместите изображения и аннотации в соответствующих папках

### 2. Настройка конфигурации
1. Отредактируйте файл `data.yaml`:
```yaml
path: путь_к_датасету
train: images/train
val: images/val
nc: 10  # количество классов
names: ['D00', 'D01', 'D10', 'D11', 'D20', 'D40', 'D43', 'D44', 'D50', 'Repair area']
```

### 3. Обучение модели
```bash
yolo train model=yolov8n.pt data=data.yaml epochs=N imgsz=640
```

### 4. Использование обученной модели
1. Скопируйте веса модели (`best.pt`) в папку проекта
2. Обновите путь к модели в `detect.py`:
```python
model = YOLO("путь_к_вашей_модели/best.pt")
```

## Структура проекта
```
project/
├── app.py              # Основной файл приложения
├── routes.py           # Маршруты и обработчики
├── models.py           # Модели базы данных
├── detect.py           # Модуль детекции
├── config.py           # Конфигурация
├── requirements.txt    # Зависимости
├── static/            # Статические файлы
│   ├── uploads/       # Загруженные изображения
│   └── results/       # Результаты обработки
├── templates/         # HTML шаблоны
└── data.yaml         # Конфигурация датасета
```

## Использование
1. Зарегистрируйтесь в системе
2. Загрузите изображение дорожного покрытия
3. Дождитесь результатов анализа
4. Просмотрите обнаруженные дефекты и рекомендации

## Устранение неполадок
1. Если возникают ошибки с базой данных:
   - Проверьте подключение к PostgreSQL
   - Убедитесь в правильности учетных данных

2. Если возникают ошибки при детекции:
   - Проверьте наличие GPU и CUDA
   - Убедитесь в правильности пути к модели
